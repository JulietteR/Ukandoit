{% extends "::base.html.twig" %}
{% block body %}
<div class="container add_defis">
	<div class="row titre_page">
		<div class="bloc_rouge"></div>
		<div class="bloc_titre">
			<h1>Lancer un défi</h1>
		</div>
	</div>
	<div class="row">
		<ul id="tabs_add_defis" class="tabs">
			<li class="tab col s3"><a class="active" href="#idoit" title="IDID'IT !">IDID'IT !</a></li>
			<li class="tab col s3"><a href="#kanudoit" title="KANWEDO'IT ?">KANWEDO'IT ?</a></li>
		</ul>
		<div id="idoit" class="col s12">
			<form action="{{ path('add_defis') }}" {{ form_enctype(form) }} method="POST">
				<div class="row">
					<div class="bande_rouge">
						<div class="col s12">Ajouter un défi <i>( Vous avez déjà fait la performance )</i></div>
					</div>
					<div class="card-panel">
						<div class="form-group">
							<div class="input-field col s12">
								{{ form_widget(form.title, { 'attr': {'class': 'form-control' } }) }}
								{{ form_errors(form.title) }}
								<label for="title">Titre du défis</label>
							</div>
							<div class="input-field col s12 m6">
								{{ form_widget(form.endDate, { 'id': 'new_challenge_endDate1', 'attr': {'class': 'form-control datepicker'} }) }}
								{{ form_errors(form.endDate) }}
								<label for="endDate">Date de fin du défi</label>
							</div>
							<div class="input-field col s12 m6">
								{{ form_widget(form.activity, { 'attr': {'class': 'form-control'} }) }}
								{{ form_errors(form.activity) }}
								<label for="activity">Activité correspondante</label>
							</div>
							<div class="input-field col s12">
								<select id="select_montre">
									<option value="" disabled selected>Choisir la montre</option>
									{% for possessedDevice in app.user.possessedDevices %}
									<option value="{{ possessedDevice.id }}">{{ possessedDevice.deviceType }}</option>
									{% endfor %}
								</select>
								<label>Avec quelle montre ?</label>
							</div>
							<div class="input-field col s12">
								<select id="select_pas_km_first">
									<option value="" disabled selected>Choisir le type</option>
									<option value="pas">Nombre de pas</option>
									<option value="km">Nombre de kilomètres</option>
								</select>
								<label>En nombre de pas ou en kilomètres ?</label>
							</div>
							<div class="input-field col s12 m6">
								<input id="new_challenge_startPerf" class="form-control datepicker" type="text" required="required" readonly="readonly">
								<label for="endDate">Date de début de votre performance</label>
							</div>
							<div class="input-field col s12 m6">
								<input id="new_challenge_endPerf" class="form-control datepicker" type="text" required="required" readonly="readonly">
								<label for="endDate">Date de fin de votre performance</label>
							</div>
							<div class="input-field col s12">
								<a class="waves-effect waves-light btn modal-trigger-ajax" href="#getDataChallenge" title="Récupérer mes performances">Récupérer sa performance</a>
							</div>
							<div class="input-field col s12">
							<div class="preloader-wrapper small">
								<div class="spinner-layer spinner-red-only">
									<div class="circle-clipper left">
										<div class="circle"></div>
									</div><div class="gap-patch">
									<div class="circle"></div>
								</div><div class="circle-clipper right">
								<div class="circle"></div>
							</div>
						</div>
					</div>
					</div>
					<div id="hidden_content" class="hide">
						<div class="input-field col s4">
							{{ form_widget(form.nbSteps, { 'attr': {'class': 'form-control', 'disabled': 'disabled'} }) }}
							{{ form_errors(form.nbSteps) }}
							<label for="activity">Nombre de pas</label>
						</div>
						<div class="input-field  col s4">
							{{ form_widget(form.kilometres, { 'attr': {'class': 'form-control', 'disabled': 'disabled'} }) }}
							{{ form_errors(form.kilometres) }}
							<label for="activity">Nombre de kilomètres</label>
						</div>
						<div class="input-field col s4">
							{{ form_widget(form.time, { 'attr': {'class': 'form-control', 'disabled': 'disabled'} }) }}
							{{ form_errors(form.time) }}
							<label for="activity">En ? de jour</label>
						</div>
						{{ form_rest(form) }}
						{{ form_errors(form) }}
					</div>
					{{ form_rest(form) }}
					{{ form_errors(form) }}
					<div class="form-group">
						<div class="btn_centre">
							<input type="submit" value="Kanudo'it ?" disabled="true" id="ToDisabledAddDefis" class="btn btn-primary btn-block btn-lg" title="Defier!">
						</div>
					</div>
				</div>
			</div>
		</div>
	</form>
	{{ form_end(form, {'render_rest': false}) }}
</div>
<div id="kanudoit" class="col s12">
	<form action="{{ path('add_defis') }}" {{ form_enctype(form2) }} method="POST">
		<div class="row">
			<div class="bande_rouge">
				<div class="col s12">Ajouter un défi <i>( Vous n'avez pas encore fait la performance )</i></div>
			</div>
			<div class="card-panel">
				<div class="input-field form-group col s12">
					{{ form_widget(form2.title, { 'attr': {'class': 'form-control' } }) }}
					{{ form_errors(form2.title) }}
					<label for="title">Titre du défis</label>
				</div>
				<div class="input-field form-group col s12">
					{{ form_widget(form2.endDate, { 'id': 'new_challenge_endDate2', 'attr': {'class': 'form-control datepicker'} }) }}
					{{ form_errors(form2.endDate) }}
					<label for="endDate">Date de fin</label>
				</div>
				<div class="input-field col s12">
					<select id="select_pas_km">
						<option value="" disabled selected>Choisir le type</option>
						<option value="pas">Nombre de pas</option>
						<option value="km">Nombre de kilomètres</option>
					</select>
					<label>C'est un défi en nombre de pas ou en kilomètres ?</label>
				</div>
				<div id="inputSteps2" style="display: none;" class="input-field form-group col s12">
					{{ form_widget(form2.nbSteps, { 'id': 'new_challenge_nbSteps2', 'attr': {'class': 'form-control'} }) }}
					{{ form_errors(form2.nbSteps) }}
					<label for="activity">Nombre de pas</label>
				</div>
				<div id="inputKm2" style="display: none;" class="input-field form-group col s12">
					{{ form_widget(form2.kilometres, { 'id': 'new_challenge_kilometres2', 'attr': {'class': 'form-control'} }) }}
					{{ form_errors(form2.kilometres) }}
					<label for="activity">Nombre de kilomètres</label>
				</div>
				<div class="input-field form-group col s12">
					{{ form_widget(form2.time, { 'attr': {'class': 'form-control'} }) }}
					{{ form_errors(form2.time) }}
					<label for="activity">En combien de jour ?</label>
				</div>
				<div class="input-field form-group col s12">
					{{ form_widget(form2.activity, { 'attr': {'class': 'form-control'} }) }}
					{{ form_errors(form2.activity) }}
					<label for="activity">Activité correspondante</label>
				</div>
				{{ form_rest(form2) }}
				{{ form_errors(form2) }}
				<div class="form-group">
					<div class="btn_centre">
						<input type="submit" value="Kanudo'it ?" class="btn btn-primary btn-block btn-lg" title="Defier!">
					</div>
				</div>
			</div>
		</div>
	</form>
	{{ form_end(form2, {'render_rest': false}) }}
</div>
</div>
</div>

{% endblock %}

{% block javascripts %}
<script type="text/javascript">
	$( document ).ready(function() {
		{% if data.errors is defined %}
		{% for error in data.errors %}
		toastr.error("{{error}}");
		{% endfor %}
		{% endif %}
	});
</script>

{% endblock %}